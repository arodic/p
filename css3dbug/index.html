
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>three.js webgl - CSS3D Bug</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
      body {
        font-family: Monospace;
        background-color: #000;
        margin: 0px;
        overflow: hidden;
      }

      .page3D {
        background: rgba(255,255,255,0.9);
        opacity: 1;
        display: block;
        position: absolute;
        font-size: 19px;
      }

    </style>

  </head>
  <body>

    <div id="page1" class="page3D">
      Quinoa tofu authentic, occupy gluten-free ea keytar viral est occaecat. Banjo neutra sint eu, semiotics gastropub magna tempor 3 wolf moon. Odio squid consectetur direct trade, enim organic tonx sint banjo whatever brooklyn. Dolor mlkshk irure dolore, fanny pack mollit mustache umami fap mumblecore. Jean shorts banjo duis, helvetica fashion axe direct trade vegan nihil. Odio excepteur blue bottle ugh, pug keffiyeh VHS gastropub ad twee laborum sint et. Do pitchfork artisan pop-up gluten-free.

      Commodo literally pitchfork art party. Master cleanse single-origin coffee consequat, forage hoodie try-hard ullamco shoreditch magna dolore freegan swag gentrify artisan cupidatat. Blue bottle minim synth, aute officia mlkshk YOLO laborum umami polaroid vice marfa brunch. Iphone commodo sapiente, keffiyeh dolore gluten-free velit laborum vinyl gastropub polaroid pitchfork lomo put a bird on it you probably haven't heard of them. Shoreditch lo-fi tempor mixtape. Deep v beard nesciunt delectus ut mumblecore excepteur wes anderson. Flannel actually farm-to-table placeat, +1 whatever nisi cray occaecat do.

      Bicycle rights pinterest pug church-key, intelligentsia dolore butcher est 90's culpa swag. Skateboard blog eiusmod, scenester stumptown yr fanny pack nihil ethical. Artisan tumblr quinoa eiusmod, occupy wayfarers fanny pack. Chillwave twee reprehenderit, keffiyeh you probably haven't heard of them etsy selvage wes anderson elit next level craft beer veniam consectetur nisi. Food truck leggings dolor, retro intelligentsia delectus sed iphone carles mumblecore readymade bespoke aliquip. Flexitarian pitchfork high life enim. Velit sapiente pop-up street art actually, next level commodo williamsburg.

      Ut occaecat excepteur dolore blue bottle meggings. Street art id literally aliquip veniam viral aesthetic, helvetica 8-bit magna deep v butcher fap qui. Brunch fugiat thundercats bespoke, freegan biodiesel +1 magna. Consectetur accusamus artisan consequat, reprehenderit anim locavore intelligentsia mcsweeney's vice leggings elit american apparel. High life freegan proident, yr brunch cillum viral cupidatat intelligentsia commodo letterpress irony. Sapiente reprehenderit lo-fi, aliqua et tonx letterpress farm-to-table irony lomo sustainable. YOLO consequat aute, hoodie ethical iphone pinterest wes anderson pitchfork intelligentsia.
    </div>
    <div id="page2" class="page3D">
      Quinoa tofu authentic, occupy gluten-free ea keytar viral est occaecat. Banjo neutra sint eu, semiotics gastropub magna tempor 3 wolf moon. Odio squid consectetur direct trade, enim organic tonx sint banjo whatever brooklyn. Dolor mlkshk irure dolore, fanny pack mollit mustache umami fap mumblecore. Jean shorts banjo duis, helvetica fashion axe direct trade vegan nihil. Odio excepteur blue bottle ugh, pug keffiyeh VHS gastropub ad twee laborum sint et. Do pitchfork artisan pop-up gluten-free.

      Commodo literally pitchfork art party. Master cleanse single-origin coffee consequat, forage hoodie try-hard ullamco shoreditch magna dolore freegan swag gentrify artisan cupidatat. Blue bottle minim synth, aute officia mlkshk YOLO laborum umami polaroid vice marfa brunch. Iphone commodo sapiente, keffiyeh dolore gluten-free velit laborum vinyl gastropub polaroid pitchfork lomo put a bird on it you probably haven't heard of them. Shoreditch lo-fi tempor mixtape. Deep v beard nesciunt delectus ut mumblecore excepteur wes anderson. Flannel actually farm-to-table placeat, +1 whatever nisi cray occaecat do.

      Bicycle rights pinterest pug church-key, intelligentsia dolore butcher est 90's culpa swag. Skateboard blog eiusmod, scenester stumptown yr fanny pack nihil ethical. Artisan tumblr quinoa eiusmod, occupy wayfarers fanny pack. Chillwave twee reprehenderit, keffiyeh you probably haven't heard of them etsy selvage wes anderson elit next level craft beer veniam consectetur nisi. Food truck leggings dolor, retro intelligentsia delectus sed iphone carles mumblecore readymade bespoke aliquip. Flexitarian pitchfork high life enim. Velit sapiente pop-up street art actually, next level commodo williamsburg.

      Ut occaecat excepteur dolore blue bottle meggings. Street art id literally aliquip veniam viral aesthetic, helvetica 8-bit magna deep v butcher fap qui. Brunch fugiat thundercats bespoke, freegan biodiesel +1 magna. Consectetur accusamus artisan consequat, reprehenderit anim locavore intelligentsia mcsweeney's vice leggings elit american apparel. High life freegan proident, yr brunch cillum viral cupidatat intelligentsia commodo letterpress irony. Sapiente reprehenderit lo-fi, aliqua et tonx letterpress farm-to-table irony lomo sustainable. YOLO consequat aute, hoodie ethical iphone pinterest wes anderson pitchfork intelligentsia.
    </div>
    <div id="page3" class="page3D">
      Quinoa tofu authentic, occupy gluten-free ea keytar viral est occaecat. Banjo neutra.
    </div>

    <script src="./dat.gui.min.js"></script>
    <script src="./three.min.js"></script>
    <script src="./CSS3DRenderer.js"></script>
    <script>

      var container;

      var camera, scene, renderer;
      var page1 = {};
      var page2 = {};
      var page3 = {};

      init();
      animate();

      function init() {

        container = document.createElement( 'div' );
        document.body.appendChild( container );

        renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.domElement.style.position = 'fixed';
        container.appendChild( renderer.domElement );

        cssRenderer = new THREE.CSS3DRenderer();
        cssRenderer.setSize( window.innerWidth, window.innerHeight );
        cssRenderer.domElement.style.position = 'fixed';
        container.appendChild(cssRenderer.domElement);
        
        camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 0.1, 100 );
        camera.position.z = 1;

        scene = new THREE.Scene();

        var grid = new THREE.Mesh( new THREE.PlaneGeometry( 10, 10, 100, 100 ), new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true, transparent: true, opacity: 0.2} ) );
        scene.add( grid );

        // CSS3D Objects

        page1.html = document.getElementById('page1');
        page1.html.style.width = '800px';
        page1.html.style.height = '800px';
        page1.object = new THREE.CSS3DObject(page1.html);
        page1.object.position.set(-1.6,0,0);
        page1.object.scale.set(0.002,0.002,0.002);

        page2.html = document.getElementById('page2');
        page2.html.style.width = '800px';
        page2.html.style.height = '800px';
        page2.object = new THREE.CSS3DObject(page2.html);
        page2.object.position.set(0,0,0);
        page2.object.scale.set(0.002,0.002,0.002);

        page3.html = document.getElementById('page3');
        page3.html.style.width = '160px';
        page3.html.style.height = '160px';
        page3.object = new THREE.CSS3DObject(page3.html);
        page3.object.position.set(1.6,0,0);
        page3.object.scale.set(0.01,0.01,0.01);

        scene.add(page1.object);
        scene.add(page2.object);
        scene.add(page3.object);

        //

        var gui = new dat.GUI();
        gui.add({ scrollbars: function(){
          if (page1.html.style.overflow != 'scroll'){
            page1.html.style.overflow = 'scroll';
            page2.html.style.overflow = 'scroll';
            page3.html.style.overflow = 'scroll';
          } else {
            page1.html.style.overflow = 'hidden';
            page2.html.style.overflow = 'hidden';
            page3.html.style.overflow = 'hidden';            
          }
        } }, 'scrollbars');

        window.addEventListener( 'resize', onWindowResize, false );

      }

      function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );
        cssRenderer.setSize( window.innerWidth, window.innerHeight );

      }

      //

      function animate() {

        requestAnimationFrame( animate );

        render();

      }

      function render() {

        var timer = Date.now() * 0.0001;

        camera.position.z = Math.sin( timer * 10 ) + 1.5;
        // page1.object.position.z = Math.sin( timer * 10 ) * 1;
        camera.lookAt(scene.position);

        renderer.render( scene, camera );
        cssRenderer.render( scene, camera );


      }

    </script>

  </body>
</html>

// Converted from: ./flatroof_RoofTexture_26.obj
//  vertices: 343
//  faces: 107
//  normals: 0
//  colors: 0
//  uvs: 421
//  materials: 0
//  edges: 0
//
//  Generated with OBJ -> Three.js converter
//  http://github.com/alteredq/three.js/blob/master/utils/exporters/convert_obj_three.py


var model = {

    "version" : 2,
    
    "scale" : 1.000000,

    "materials": [	{
	"DbgColor" : 15658734,
	"DbgIndex" : 0,
	"DbgName" : "default"
	}],

    "vertices": [],
    
    "morphTargets": [],

    "morphColors": [],

    "normals": [],

    "colors": [],

    "uvs": [[1,1,0.6691,0,0,0,0.3309,1,1,1,0.9222,0.0154,0.1442,0,0,1,0,0.0177,0.1911,1,1,1,0.8054,0,0,0.0177,0.1911,1,1,1,0.8054,0,0,0.0177,0.1429,1,1,1,0.8545,0,0,1,1,1,1,0,0,0,1,0,0,0,0,1,1,1,0,1,0.8766,0.0061,0.8214,0,0,0,0,1,0.8766,0.0061,0.8214,0,0,0,1,0,0,0,0,1,1,1,0,1,0.8687,1,1,0.4286,0.229,0,0,1,0.8687,1,1,0.4286,0.229,0,1,1,0.7177,0.00099999,0,0,0.0056,1,0,0.00099999,0.1869,1,1,1,0.8129,0,0,0.00099999,0.1682,1,1,1,0.8317,0,0,0.075,1,1,0.9005,0.6038,0.724,0,0.0055,1,0.7165,0,0,0.072,0.8002,0,0.9952,1,1,0.8466,0.8255,0.0937,0.7854,0,0.9952,1,1,0.8546,0.8255,0.1409,0.8002,0,0.9952,1,1,0.8466,0.8255,0.0937,0.7854,0,0.9952,1,1,0.8546,0.8255,0.1409,0.8002,0,0.9952,1,1,0.8466,0.8255,0.0937,0.7854,0,0.9952,1,1,0.8546,0.8255,0.1409,0.8002,0,0.9952,1,1,0.8466,0.8255,0.0937,0.7854,0,0.9952,1,1,0.8546,0.8255,0.1409,0.7854,0,0.9952,1,1,0.8546,0.8255,0.1409,0.2454,1,0.8739,0.4861,0.3536,0,0,0,0.828,1,0.3881,0,0,0.9238,0.0728,1,1,1,0.998,0.0015,0.0036,0,0,1,0.8514,1,0.5222,0,0,0.7258,0.1651,1,0.9982,0,0,0.00040001,0.0013,1,1,1,0.9988,0,0,0,0.0008,1,1,1,1,0,0.425,0,0,1,0.575,1,0,1,1,1,1,0,0,0,1,0.9311,1,0,0,0,0,0.9311,0,0.9311,0,1,1,1,1,0.9311,0,1,1,0.5575,0.4882,0,0.0568,0,1,1,0.1554,0,0,0.238,0,1,1,1,0.3163,0,0,0.4845,0,1,0.0439,1,0.391,0,0,0.5988,0,0.9328,0.8472,1,0.5,0,0,0.7659,0.1528,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0.0003,0.00019997,0,1,1,1,0.9996,0,0.9994,1,1,0.00019997,0.0006,0,0,1,0.9994,1,1,0.00019997,0.0006,0,0,1,0.9994,1,1,0.00019997,0.0006,0,0,1,0.9994,1,1,0.00019997,0.0006,0,0,1,1,0.0212,0.0013,0,0,1,0.999,1,0.9982,0,0,0,0.0015,1,1,1,0.9982,0,0,0,0.0015,1,1,1,0.9982,0,0,0,0.0015,1,1,1,0.9982,0,0,0,0.0015,1,1,1,0.9982,0,0,0,0.0015,1,1,1,1,0,0,0,0,1,1,1,0.7597,0,0.9794,1,1,0.9731,1,0.3148,1,1,0.0387,0,0,0.0571,0,1,1,1,0.0804,0,0,0.1175,0,1,1,1,0.1482,0,0,0.2127,0,1,1,1,0.189,0,0,0.2684,0,1,1,1,0.2141,0,0,0.3021,0,1,1,1,0.2403,0,0,0.3368,0,1,0.9988,0,0,0.00040001,0.0004,1,1,1,0.9993,0,0,0,0,1,1,1,0.9993,0,0,0,0,1,1,1,0.9993,0,0,0,0,1,1,1,0.9993,0,0,0,0,1,1,1,1,0.3368,0.7597,0,0.2403,0,1,1,0.7859,0,0.2141,0,1,1,1,0.3021,0.811,0,0.189,0,1,1,1,0.2684,0.8518,0,0.1482,0,1,1,1,0.2127,0.9196,0,0.0804,0,1,1,1,0.1175,0.9613,0,0.0387,0,1,1,1,0.0571,0,0.9731,0.0206,1,0.2403,0,0,0.3148,0.2403,0,0.0206,1,0.9794,1,0.7597,0,1,0.7659,0.5,0,0.8472,1,0.609,0,0.391,0,0.0439,1,0.9561,1,0.609,0,0.9561,1,1,0.9328,1,0.5988,0.6837,0,0.3163,0,1,1,1,0.4845,0.8446,0,0.1554,0,1,1,1,0.238,0.9749,1,1,0.5575,0,1,1,0.7934,0.5222,0,0.8514,1,1,0.586,0.3881,0,0.828,1,1,1,0.8739,0.4861,0.2454,1,0.0056,1,0.9952,1,0.7854,0,0,0,0.0056,1,0.9952,1,0.7854,0,0,0,0.0054,1,0.9952,1,0.8002,0,0,0,0.0056,1,0.9952,1,0.7854,0,0,0,0.0054,1,0.9952,1,0.8002,0,0,0,0.0056,1,0.9952,1,0.7854,0,0,0,0.0054,1,0.9952,1,0.8002,0,0,0,0.0056,1,0.9952,1,0.7854,0,0,0,0.0054,1,0.9952,1,0.8002,0,0,0,0.0055,1,1,1,0.8911,0.5794,0.7165,0,0.0054,1,1,1,0,0.075,0,1,0.8214,1,0.9264,0.0239,0.8766,0.0061,0.9264,0.0239,0.8214,1,0.9913,0.0864,0.9659,0.0515,0.9913,0.0864,0.8214,1,1,0.875,1,0.125,1,0.875,0.8214,1,0.8766,0.9939,0.9913,0.9136,0.9913,0.9136,0.8766,0.9939,0.9264,0.9761,0.9659,0.9485,0,1,0.8214,1,0.9264,0.0239,0.8766,0.0061,0.9264,0.0239,0.8214,1,0.9913,0.0864,0.9659,0.0515,0.9913,0.0864,0.8214,1,1,0.875,1,0.125,1,0.875,0.8214,1,0.8766,0.9939,0.9913,0.9136,0.9913,0.9136,0.8766,0.9939,0.9264,0.9761,0.9659,0.9485]],

    "faces": [],

    "edges" : []

};

var req = new XMLHttpRequest();
req.open('GET', "flatroof_RoofTexture_26.txt", false);
req.send(null);
if (req.status == 200 || req.status == 0) {
  var numVertices = 1029;
  var numMorphTargets = model.morphTargets.length;
  var scale = 1.93834495508;
  model.vertices = new Float32Array(numVertices);
  for (var j = 0; j < numMorphTargets; ++j) {
    model.morphTargets[j].vertices = new Float32Array(numVertices);
  }

  var untransposed = new Int16Array(numVertices);
  var transposeOffset = numVertices / 3;
  var prevX = 0, prevY = 0, prevZ = 0;
  for (var i = 0; i < transposeOffset; ++i) {
    var x = req.responseText.charCodeAt(i);
    x = (x >> 1) ^ (-(x & 1));
    prevX += x;
    untransposed[3*i] = prevX;
    var y = req.responseText.charCodeAt(transposeOffset + i);
    y = (y >> 1) ^ (-(y & 1));
    prevY += y;
    untransposed[3*i + 1] = prevY;
    var z = req.responseText.charCodeAt(2*transposeOffset + i);
    z = (z >> 1) ^ (-(z & 1));
    prevZ += z;
    untransposed[3*i + 2] = prevZ;
  }

  for (var i = 0; i < numVertices; ++i) {
    var word = untransposed[i];
    model.vertices[i] = scale * word;

    var prev = word;
    for (var j = 0; j < numMorphTargets; ++j) {
      var offset = (j + 1) * numVertices;
      var delta = req.responseText.charCodeAt(offset + i);
      delta = (delta >> 1) ^ (-(delta & 1));
      prev += delta;
      model.morphTargets[j].vertices[i] = scale * prev;
    }
  }
  var faceOffset = numVertices * (numMorphTargets + 1);
  var numFaces = 1056;
  model.faces = new Uint16Array(numFaces);
  for (var i = 0; i < numFaces; ++i) {
    model.faces[i] = req.responseText.charCodeAt(faceOffset + i);
  }
}

postMessage( model );
close();
